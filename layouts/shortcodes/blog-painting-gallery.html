<!-- Colorize 色相[0, 360] 飽和度[0, 100] 百分比[0, 100] -->
{{ $filter1 := (images.Colorize 188 30 12) }}
<!-- Brightness 百分比[-100, 100] -->
{{ $filter2 := (images.Brightness -12) }}
<!-- 浮水印 -->
{{ $logo := resources.Get "/images/copyright_drowsybao.png" }} 
{{ $logoFilter := (images.Overlay $logo 24 198 ) }}
{{ $imgdir := printf "images/%s/%s" (.Get "imgdir" | default "NULL") (.Get "imgsubdir" | default "NULL") }}
{{ $image := resources.Get (printf "%s/%s" $imgdir (.Get "name" | default "NULL")) }}
{{ $maxwidth := (.Get "max-width" | default "NULL") }}
{{ $maxwidth := (.Get "title" | default "") }}
{{ $imageTmp := $image }}
{{ $imageTmp = $imageTmp.Filter $filter1 }}
{{ $imageTmp = $imageTmp.Filter $filter2 }}
{{ $imageTmp = $imageTmp.Filter $logoFilter }}
<!--img class="blog-gallery" src="{{ $imageTmp.RelPermalink }}" alt="{{ $imageTmp.Name }}" {{ if ne $maxwidth "NULL" }} style="max-width: {{ $maxwidth }}%;" {{ end }}-->
{{ $thumbnail := $image.Filter (slice images.AutoOrient (images.Process "fit 600x600")) }}
{{ $full := $image.Filter (slice images.AutoOrient (images.Process "fit 1600x1600")) }}
{{ $color := index $thumbnail.Colors 0 | default "transparent" }}
<a class="gallery-item" href="{{ $image.RelPermalink }}" data-pswp-src="{{ $full.RelPermalink }}" data-pswp-width="{{ $full.Width }}" data-pswp-height="{{ $full.Height }}" title="{{ $title }}" description="{{ .Description }}" itemscope itemtype="https://schema.org/ImageObject" style="aspect-ratio: {{ $thumbnail.Width }} / {{ $thumbnail.Height }}">
  <img loading="lazy" width="{{ $thumbnail.Width }}" height="{{ $thumbnail.Height }}" src="{{ $thumbnail.RelPermalink }}" style="background-color: {{ $color }}" alt="{{ $title }}" />
  <meta itemprop="contentUrl" content="{{ $image.RelPermalink }}" />
  {{ with site.Params.Author }}
    <span itemprop="creator" itemtype="https://schema.org/Person" itemscope>
      <meta itemprop="name" content="{{ site.Params.Author.name }}" />
    </span>
  {{ end }}
</a>